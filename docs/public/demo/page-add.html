<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <p>当前页面url:page-add.html</p>
    <p>添加用户的表单忽略..</p>

    <p>1.新增用户成功后我想要刷新用户列表页(page-list.html)</p>
    <button id="btn1">运行</button><span>(运行后可以手动切换到用户列表页查看页面随机标志查看是否刷新成功)</span>


    <p>2.新增用户成功后我想要刷新且切回用户列表页</p>
    <button id="btn2">运行</button>


    <p>3.新增用户成功后我想要刷新且切回用户列表页,同时要关闭当前页面</p>
    <button id="btn3">运行</button>

    <p>4.新增用户成功后我想要切回用户列表页,并且只修改部分内容、或者只想调用数据表格bootstrap-table插件的刷新方法</p>
    <button id="btn4">运行</button>


    <script>


        const userListUrl = 'page-list.html'
        const currUrl = 'page-add.html'

        //找到父级页面的Quicktab实例
        const qtab = parent.Quicktab.get('qtab2')

        document.getElementById('btn1').addEventListener('click', function () {
            qtab.refreshTabByUrl(userListUrl)
        })


        document.getElementById('btn2').addEventListener('click', function () {
            qtab.refreshTabByUrl(userListUrl)

            qtab.activeTabByUrl(userListUrl)

        })


        document.getElementById('btn3').addEventListener('click', function () {
            qtab.refreshTabByUrl(userListUrl)

            qtab.activeTabByUrl(userListUrl)

            qtab.closeTabByUrl(currUrl)

        })


        document.getElementById('btn4').addEventListener('click', function () {
            //需要先获取到tab的Window对象
            const userListTabWindow = qtab.getTabWindowByUrl(userListUrl)


            //修改部分内容
            userListTabWindow && (userListTabWindow.document.getElementById('num').innerText = '~~~值被改成固定内容啦~~')


            //如果单纯的想调用bootstrap-table数据表格插件的刷新方法
            userListTabWindow && userListTabWindow.$('#table').bootstrapTable('refresh')

        })

    </script>
</body>

</html>